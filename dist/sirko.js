!function(){"use strict";var e={appendLink:function(e,r){var t=document.createElement("link");t.href=r,t.rel=e,document.head.appendChild(t)}},r=function(e){this.engineUrl=e,this.xhr=new XMLHttpRequest};r.prototype.predict=function(e){var r=this;return new Promise(function(t){r._makePrediction(e,t)})},r.prototype._makePrediction=function(e,r){var t=this;this.xhr.withCredentials=!0,this.xhr.open("POST",this._predictorUrl()),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.onload=function(){r(JSON.parse(t.xhr.response))},this.xhr.send(this._requestBody(e))},r.prototype._predictorUrl=function(){return this.engineUrl+"/predict"},r.prototype._requestBody=function(e){var r={current:e.currentPath,assets:e.assets};return e.referrerPath&&(r.referrer=e.referrerPath),JSON.stringify(r)};var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=function(e,r){return r={exports:{}},e(r,r.exports),r.exports}(function(e){!function(r){var t=/iPhone/i,n=/iPod/i,i=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,a=/Windows Phone/i,d=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,u=/BlackBerry/i,h=/BB10/i,f=/Opera Mini/i,l=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,w=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),b=function(e,r){return e.test(r)},P=function(e){var r=e||navigator.userAgent,P=r.split("[FBAN");if(void 0!==P[1]&&(r=P[0]),void 0!==(P=r.split("Twitter"))[1]&&(r=P[0]),this.apple={phone:b(t,r),ipod:b(n,r),tablet:!b(t,r)&&b(i,r),device:b(t,r)||b(n,r)||b(i,r)},this.amazon={phone:b(c,r),tablet:!b(c,r)&&b(p,r),device:b(c,r)||b(p,r)},this.android={phone:b(c,r)||b(o,r),tablet:!b(c,r)&&!b(o,r)&&(b(p,r)||b(s,r)),device:b(c,r)||b(p,r)||b(o,r)||b(s,r)},this.windows={phone:b(a,r),tablet:b(d,r),device:b(a,r)||b(d,r)},this.other={blackberry:b(u,r),blackberry10:b(h,r),opera:b(f,r),firefox:b(v,r),chrome:b(l,r),device:b(u,r)||b(h,r)||b(f,r)||b(v,r)||b(l,r)},this.seven_inch=b(w,r),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},y=function(){var e=new P;return e.Class=P,e};e.exports&&"undefined"==typeof window?e.exports=P:e.exports&&"undefined"!=typeof window?e.exports=y():r.isMobile=y()}(t)}),i={process:function(e){return!new n.Class(e.agent).any&&e}},o={process:function(e){return"undefined"!=typeof Promise&&e}},s={process:function(e){return"serviceWorker"in navigator&&(navigator.serviceWorker.register("sirko_sw.js"),caches.delete("sirko-pages")),e}},c={process:function(e){var r=e.referrer,t=new RegExp("^http(s)?://"+e.domain);return r&&!t.test(r)&&(r=null),e.referrer=r,e}},p={process:function(e){var r=new RegExp("^http(s)?://"+e.domain+"(.*)?/");return e.currentPath=e.currentPath.replace(r,"/"),e.referrer&&(e.referrer=e.referrer.replace(r,"/")),e}},a=window.sessionStorage,d={put:function(e,r){"object"==typeof r&&(r=JSON.stringify(r)),a.setItem(e,r)},pull:function(e){var r=a.getItem(e);if(r)return"{"===r.charAt(0)&&(r=JSON.parse(r)),r},shift:function(e,r){var t=a.getItem(e);t&&a.setItem(r,t)},clear:function(){a.clear()}},u={preprocessors:[i,o,s,c,p,{process:function(e){return d.pull("lastPredictionFor")===e.currentPath&&(e.prediction=d.pull("lastPrediction"),e.prediction.cached=!0),e}},{process:function(e){var r=Array.prototype.slice.call(document.querySelectorAll('link[rel="stylesheet"]')).map(function(e){return e.href});return Array.prototype.slice.call(document.querySelectorAll("script[src]")).forEach(function(e){r.push(e.src)}),e.assets=r,e}}],postprocessors:[{process:function(e){return e.path&&"serviceWorker"in navigator&&caches.open("sirko-pages").then(function(r){r.add(e.path)}),e}},{process:function(r,t){return r.assets&&r.assets.forEach(function(r){t.assets.indexOf(r)>-1||e.appendLink("prefetch",r)}),r}},{process:function(e,r){return d.shift("lastPrediction","prevPrediction"),d.put("lastPrediction",e),d.put("lastPredictionFor",r.currentPath),e}},{process:function(e,r){var t=d.pull("prevPrediction");return!e.cached&&t&&(e.isPrevCorrect=t.path===r.currentPath),e}}],preprocess:function(e,r){return this._runProcessors(this.preprocessors,e,r)},postprocess:function(e,r,t){return this._runProcessors(this.postprocessors,e,r,t)},_runProcessors:function(e,r,t){for(var n=0;n<e.length;n++)if(!(r=e[n].process(r,t)))return!1;return r}},h={predict:function(e,t){if(!(e=u.preprocess(e,t)))return!1;return(e.prediction?new Promise(function(r){r(e.prediction)}):new r(t.engineUrl).predict({currentPath:e.currentPath,referrerPath:e.referrer,assets:e.assets})).then(function(r){var t=u.postprocess(r,e);return new Promise(function(e){e([t.path,t.isPrevCorrect])})})}},f=window.sirko;if(f){var l={agent:window.navigator.userAgent,referrer:document.referrer,currentPath:window.location.href,domain:document.domain},v={};f.q.forEach(function(e){var r=e[0],t=e[1];v[r]=t}),window.sirko=function(e,r){v.prediction&&"predicted"===e?r.apply(this,v.prediction):v[e]=r},h.predict(l,v).then(function(e){v.predicted&&v.predicted.apply(v.predicted,e),v.prediction=e})}}();
